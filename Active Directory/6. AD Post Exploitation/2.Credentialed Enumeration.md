### **SMB Enumeration Commands with CrackMapExec (CME)**

#### **1. Domain User Enumeration**

```bash
sudo crackmapexec smb <DC_IP> -u <username> -p <password> --users
```

#### **2. Domain Group Enumeration**

```bash
sudo crackmapexec smb <DC_IP> -u <username> -p <password> --groups
```

#### **3. Logged On Users**

```bash
sudo crackmapexec smb <Target_IP> -u <username> -p <password> --loggedon-users
```

#### **4. Share Enumeration**

```bash
sudo crackmapexec smb <DC_IP> -u <username> -p <password> --shares
```

#### **5. Spider Plus (File Discovery in Shares)**

```bash
sudo crackmapexec smb <DC_IP> -u <username> -p <password> -M spider_plus --share '<Share_Name>'
```


### **SMBMap Commands**

- **Check Access**
    
    ```bash
    smbmap -u <username> -p <password> -d <domain> -H <target_IP>
    ```
    
- **Recursive List of Directories (Without Files)**
    
    ```bash
    smbmap -u <username> -p <password> -d <domain> -H <target_IP> -R '<Share_Name>' --dir-only
    ```
    

---


### Psexec:
<p align="justify">PsExec is a **remote command execution tool** from Microsoftâ€™s **Sysinternals Suite**, designed for **remote administration** of Windows machines. It enables running commands, scripts, or applications on a remote system without requiring an interactive login session. The tool creates a remote service by uploading a randomly-named executable to the on the target host. It then registers the service via RPC and the ADMIN$ share Windows Service Control.</p>
To successfully execute commands using PsExec, the following conditions must be met:

1. **Administrator Privileges**
    - The user must have local admin or domain admin credentials for the target system.
2. **SMB (Port 445) Open**
    - The target machine must have **SMB enabled** and be reachable on TCP **port 445**.
3. **Admin$ Share Access**
    - The `ADMIN$` share must be available, and the user must have **write access** to it.
```
psexec.py <DOMAIN>/<USERNAME>:<PASSWORD>@<TARGET_IP>
```

### Wmiexec.py
- More stealthier than psexec
- The shell environment is not fully interactive, so each command issued will execute a new cmd.exe from WMI and execute your command.
```
wmiexec.py <DOMAIN>/<USERNAME>:<PASSWORD>@<TARGET_IP>
```

### WindapSearch:

#### Conditions:
- **A valid username and password** (unless anonymous bind is allowed).
- **The IP address of the Domain Controller (DC)** to query LDAP data.

- **Help Menu:**
    
    ```bash
    python3 windapsearch.py -h
    ```
    
- **Enumerate All Users:**
    
    ```bash
    python3 windapsearch.py --dc-ip <DC_IP> -u <USER> -p <PASSWORD> -U
    ```
    
- **Enumerate All Groups:**
    
    ```bash
    python3 windapsearch.py --dc-ip <DC_IP> -u <USER> -p <PASSWORD> -G
    ```
    
- **Enumerate All Computers:**
    
    ```bash
    python3 windapsearch.py --dc-ip <DC_IP> -u <USER> -p <PASSWORD> -C
    ```
    
- **Enumerate Domain Admins:**
    
    ```bash
    python3 windapsearch.py --dc-ip <DC_IP> -u <USER> -p <PASSWORD> --da
    ```
    
- **Enumerate Privileged Users (Recursive Lookup):**
    
    ```bash
    python3 windapsearch.py --dc-ip <DC_IP> -u <USER> -p <PASSWORD> -PU
    ```
    
- **Search for Specific User or Group:**
    
    ```bash
    python3 windapsearch.py --dc-ip <DC_IP> -u <USER> -p <PASSWORD> -s "<SEARCH_TERM>"
    ```
    
- **Custom LDAP Query:**
    
    ```bash
    python3 windapsearch.py --dc-ip <DC_IP> -u <USER> -p <PASSWORD> --custom "<LDAP_FILTER>"
    ```
