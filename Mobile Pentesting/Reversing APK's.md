Reverse engineering an Android application typically involves using specialized tools to decompile the application's compiled code and resources into a human-readable form. 

Decompiling an APK means converting the compiled APK file back into human-readable code and resources so you can analyze, modify, or understand how the app works.

Tools Used: 
- Jadx
- Apktool
- Jadx GUI

### APK tools
A powerful tool for reverse engineering APK files. It can decode application resources to their nearly original form and rebuild them after making code modifications.

When decompiling an APK with `apktool`, you may see a warning or error like:
`W: AndroidManifest.xml: merging multiple manifest files`

This indicates that the app was originally built using **multiple manifest files** (e.g., from libraries, modules, or dependencies), and apktool may struggle to reverse the merged result properly.

### Dex2Jar:
**`dex2jar`** is a reverse engineering tool that **converts Android’s `.dex` files** (Dalvik Executable format) into **`.class` files inside a `.jar` archive**, so you can view the code using Java decompilers like **JD-GUI**. 

### JD-GUI
**JD-GUI** is a free tool that lets you **see Java code from compiled `.class` or `.jar` files** — even if you don’t have the original source code.


### Smali
**Smali** is a type of code that Android apps use **after compilation**.

- Android apps are written in **Java or Kotlin**.
- When they are compiled (built), the code becomes `.dex` files.
- Inside those `.dex` files is **Smali code** – this is **low-level code** that Android understands.

> Think of **Smali as Android's version of assembly language**. It tells the app exactly what to do.

![[Pasted image 20250801155341.png]]
### Baksmali

**Baksmali** is a tool that takes `.dex` files and **converts them into Smali code**.
This process is called **disassembling**.

``Note``: we can modify the source code i.e smali code and rebuild the modified apk again 

[for more](https://hackernoon.com/apk-decompilation-a-beginners-guide-for-reverse-engineers)


### OEM Apps in Android 

### Definition

OEM (Original Equipment Manufacturer) apps are pre-installed applications provided by device manufacturers (e.g., Samsung, Xiaomi, Vivo) as part of their custom Android firmware.
### Location

|Folder Path|Purpose|
|---|---|
|`/system/app/`|Standard system apps|
|`/system/priv-app/`|Privileged system apps with extra rights|
|`/product/app/` or `/vendor/app/`|Hardware-specific or vendor-specific apps|

### Characteristics

- Pre-installed at the firmware level (ROM)
- Cannot be removed by normal users (require root access)
- Can have privileged permissions not available to third-party apps
- Usually signed with the OEM's platform certificate
- Often updated via OTA (not through Play Store)
    
### Pentester Focus Areas

#### 1. Permission Abuse

- Apps may request or be granted over-privileged permissions (e.g., SMS, CALL_LOG)
- Can bypass user-consent permission dialogs

#### 2. IPC Attack Surface

- Check for insecure exported components:
    - Activities
    - Services
    - Broadcast Receivers
    - Content Providers
        
- Focus on misconfigured `android:exported` attributes
- Test for unprotected intent handling and privilege escalation
#### 3. Static Analysis

- Decompile APKs using `apktool` or `jadx`
- Look for:
    
    - Hardcoded credentials or API keys
    - Insecure configurations in AndroidManifest.xml
    - Debug code or logging
    - Use of `android:debuggable="true"`
    - Insecure WebView usage
#### 4. Dynamic Analysis

- Use Frida, Xposed, or objection to hook and monitor app behavior
- Analyze IPC, permissions, and data flows at runtime
- Intercept and inspect network traffic with Burp Suite or mitmproxy
#### 5. Signature & Trust Misuse

- OEM apps may be signed with platform keys, granting extra privileges
    
- Look for abuse of:
    - `INSTALL_PACKAGES`
    - `DELETE_PACKAGES`
    - Any privileged system APIs

### Tools for Analysis

|Tool|Purpose|
|---|---|
|`adb pull`|Extract APKs from device|
|`apktool`|Decompile resources and manifest|
|`jadx`|Reverse engineer Java code|
|`MobSF`|Static and dynamic mobile app analysis|
|`Frida`|Runtime instrumentation and hooking|
|`Burp Suite`|Network traffic interception|
