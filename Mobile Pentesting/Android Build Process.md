The **Android build process** is the set of steps that take your app's source code and convert it into an **APK** or **AAB** file that can be installed and run on Android devices.
### What is Compiling
**Compiling** is the process of converting human-readable source code written in a programming language (like C, C++, Java, or Rust) into **machine code** (also called binary or executable code) that a computer's processor can understand and run.

![[Pasted image 20250801135343.png]]

### 1.**Resource Compilation with AAPT**

- The **Android Asset Packaging Tool (aapt)** processes:
    - Your `AndroidManifest.xml`
    - Layouts, drawables, strings, etc.  
- It generates a file called **`R.java`**, which is a class that gives your code easy access to these resources.
### 2. **AIDL Compilation (Optional)**

- If your app uses **Android Interface Definition Language (AIDL)** for interprocess communication, the **`aidl` tool** converts `.aidl` files into Java code.
### 3. **Java Compilation**

- All Java (or Kotlin) code, plus `R.java` and `.aidl` files, are compiled by the **Java compiler** into `.class` files.
### 4. **DEX Conversion**

- The `.class` files (plus any third-party libraries you included) are converted into **Dalvik bytecode**, stored in `.dex` files using the **`dex` tool** (now done by **D8** or **R8** in modern builds).
### 5. **APK Packaging**

- The **`apkbuilder` tool** (or modern equivalent) combines:
    
    - `.dex` files
    - Compiled resources
    - Images and other assets    
- These are all packaged into an **`.apk` file**, which is the Android app package.
	
	#### what is .dex files
	It contains **Dalvik bytecode** — instructions that the Android Runtime (ART or the older Dalvik VM) understands and executes on an Android device.
![[Pasted image 20250801141112.png]]
### 6. **Signing the APK**

- Before the APK can be installed on a device, it must be **signed**:
    - **Debug mode**: Uses a default debug key (for testing)
    - **Release mode**: Uses your own private key (for publishing on Google Play)

![[Pasted image 20250801135729.png]]



### APK Structure
APK is a Compressed archive containing the resources necessary to run the application which includes codes and resources such as images.

To Inspect an APK u need to change its extension to .zip and decompress it

The Contents of APK if we decompress it
![[Pasted image 20250801141430.png]]


#### Android Manifest.xml
The ‘**AndroidManifest.xml**’ file also known as the additional Android manifest file acts as an instruction manual for the app. It includes the app’s package name, permissions required, and the minimum Android version needed.

#### classes.dex
Google’s proprietary format for their version of the Java VM, contains all Java/Kotlin code compiled to their specific bytecode called [Dalvik](https://source.android.com/devices/tech/dalvik/dex-format.html).  
APK files may contain more than one `classes.dex` file due to limitations of the DEX format. Additional files will be numbered (i.e., `classes2.dex`, `classes3.dex` and so forth).
[for more](https://www.appdome.com/how-to/devsecops-automation-mobile-cicd/appdome-basics/structure-of-an-android-app-binary-apk/)


### APK Signing


APK signing is the process of digitally signing an Android application package (APK) file. This process ensures that the APK has not been tampered with or altered since it was signed. Android requires all APKs to be signed before they can be installed on a device.

### How Signing Works

1. **You create a key pair**:
    - One **private key** (for signing — keep it secret!)
    - One **public key** (for verifying — shared openly)
        
2. You **sign the APK** using your **private key**  
    🔒 This proves the APK came from _you_
    
3. You include a **certificate** in the APK:
    - It contains your **public key**
    - It’s how the device or Google Play can **verify** the APK was really signed by your private key.

### What Is a Certificate in APK Signing?

Think of a **certificate** as your app’s **digital ID card**.

### 🔹 It does 2 important things:

1. It **contains your public key**
2. It proves the **identity of the signer** (you)
It’s a file that says:

> “This app was signed by [You], and here’s the public key you can use to verify that signature.”

###  Where Does It Come From?

When you **create a key** to sign your app, a certificate is automatically generated from that key.

This certificate:

- Contains your **public key**
- Contains your **name and info** (like your organization)
- Is signed with your **private key**, so others can **trust it's really from you**
[for more](https://medium.com/@unaware_harry/what-is-the-process-for-making-a-signed-apk-0666e4efbbec)

