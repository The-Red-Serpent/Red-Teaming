The Concept of Cloud technology refers to a global network of remote servers that are accessed via the internet to store data and run applications, allowing users to access files and services anytime without managing physical hardware.

Azure is a Microsoft implementation of cloud or to be precise its an another cloud provider managed by Microsoft.
### 1.IAM
Identity and Access Management (IAM) is a cybersecurity framework that defines, manages, and controls digital identities and their access to systems, applications, and data, ensuring that only authorized entities can access resources. IAM is the system that manages identities, verifies them, and controls what they can do in a system. 

It Defines :
- who are u  
- what u can do 
- what Resources u can Access

### 2.Identity
Think of identity like a user account that can be used to authenticate and Authorize  to access a resource 

### 3.Entra ID
Microsoft Entra ID (formerly known as  Azure AD) is a cloud-based identity and access management service that acts as the gateway to Microsoft cloud services it stores identities, manages authentication, enforces access policies, decides what you can do (authorization), and issues tokens so you can securely access Azure resources. It enables your employees access to external resources such as Microsoft 365, Azure portal and other SaaS applications.

![image](https://cms.cloudoptimo.com/uploads/Microsoft_Entra_ID_6df79035af.png)

### 4.Entra ID Editions

![image](https://kodekloud.com/kk-media/image/upload/v1752884588/notes-assets/images/Updated-AZ-104-Microsoft-Azure-Administrator-Microsoft-Entra-ID-Editions/microsoft-entra-id-editions-chart.jpg)

### 5.Tenant
A tenant in Azure is your organization’s private space in Microsoft’s cloud where all your users, groups, apps, and access rules live. Each tenant has a dedicated Directory(Entra ID), This is used to perform identity and access management functions for resources.

### 6.Core Domain
In Azure (and Entra ID/Azure AD), a **Core Domain** is basically the **main domain name that your tenant uses**.
- When your organization sets up Azure, Microsoft gives your tenant a **default domain** that looks like:
```
yourcompany.onmicrosoft.com
```
- This **default domain** is called the **Core Domain
- All users, apps, and resources in the tenant are initially linked to this domain.


### 7.User Accounts 
A **user account** in Azure represents an identity/User  that can access Azure resources. It is used to **log in, authenticate, and gain permissions** to perform actions on Azure services. Every user account has a **username** and can be assigned **roles and permissions** through **Role-Based Access Control (RBAC)**.
##### Types of User Accounts
1. **Microsoft Account (MSA)**
    - Also called a **personal account**.
    - Typically ends with `@outlook.com` or other personal emails.
    - Microsoft manages both **authentication** and **authorization**.
    - Used mainly for personal services, small testing, or individual subscriptions.
2. **Work or School Account**
    - Managed by an organization through **Azure Active Directory (Azure AD / Entra ID)**.
    - Email is typically from the company or school domain, e.g., `john@company.com`.
    - Used in **business or school environments** to access Azure resources, Microsoft 365, and enterprise applications.
    - Managed centrally by IT administrators.
     ##### User Account Attributes
     - **Object ID**: Unique identifier for the user in **GUID format**.
     - **Identities**: The **tenant/domain** where the identity resides.
     - **User Type**: Specifies account type, e.g., **Member** (internal) or **Guest** (external).
     - **User Principal Name (UPN)**: The username/email used to **sign in**.
     - **Assigned Roles (Entra ID)**: Determine access to **Entra ID features** and services.
     - **Role Assignments (Azure RM)**: Determine what the user can do with **Azure resources**
    ##### Group Membership
    - Shows the **groups a user belongs to**.
    - **Membership Type**:
        - **Assigned** – manually added.
        - **Dynamic** – automatically added based on rules.
    - **Source**:
        - **Cloud** – created and assigned in Entra ID.
        - **On-premises** – synced from on-premises Active Directory or other sources.
    #####  Licenses
    - Shows the **licenses assigned** to the user.
    - Indicates services the user can access and sometimes their role
    ##### Devices
    - Lists **devices registered** to the user.
    - Helps track which devices are linked to the user account.
    ##### Authentication Methods
    - Settings for how a user can authenticate:
        - **Password reset** – self-service or admin reset.
        - **MFA registration** – setup for multi-factor authentication.
        - **Session revocation** – admin can revoke active sessions.

### 8.Groups
Groups in Azure are collections of users, devices, or other objects that simplify **access management, policy assignment, and collaboration**. Instead of assigning permissions to each user individually, you assign them to a group, and all members inherit those permissions.
##### Group Types
- **Security Groups:**
    - Used to **manage access to resources** (Azure resources, apps, files, etc.).
    - Members can be **users, devices, other groups, or service principals**.
- **Microsoft 365 Groups:**
    - Used for **collaboration**, providing shared access to **mailboxes, calendars, Teams, SharePoint files**, etc.
    - Members can only be **users**, but **owners** can be users or service principals.
##### Membership Types
- **Assigned:**
    - Members are manually added by an admin.
- **Dynamic User:**
    - Users are automatically added or removed based on **rules** tied to their attributes (e.g., department, role).
- **Dynamic Device:**
    - Devices are automatically added or removed based on **device attributes** (e.g., OS type, enrollment status).
#### Dynamic Group
A **dynamic group** in Azure (Microsoft Entra ID) is a group whose **membership is automatically managed based on rules** rather than manually adding users or devices.
- **Membership is rule-based**: Users or devices are added or removed automatically depending on attributes like `department`, `job title`, or `device type`.
 Attackers may target dynamic groups to gain access to additional
 resources

### 9.Entra ID roles
Entra ID roles (in **Azure Active Directory**, now called Entra ID) are **sets of permissions that define what a user is allowed to do in the directory**. Entra ID roles are Different from Azure Rm roles

Permissions in Entra ID are written in this structure:
```
{Provider} / {Resource Type} / {Action}
```
- **Provider:** The service that controls the resource (e.g., `microsoft.directory`)
- **Resource Type:** The type of object you’re acting on (e.g., `applications`, `users`)
- **Action:** What you are allowed to do (e.g., `allTasks`, `read`, `update`)

### 10.Service
An Azure service is the type of cloud functionality that Azure provides. It describes what Azure can do, such as running virtual machines, hosting websites, or storing data. Services are used to create resources. 

### 11.Service Principals
A **Service Principal** in Azure is like a special account created for an application, service, or automation tool to access Azure resources securely. Instead of using a personal user account, the Service Principal has its own credentials (a password or certificate) and permissions, so it can perform tasks like deploying apps, managing virtual machines, or accessing storage. 

It allows automation and applications to work safely, while giving you full control over what the Service Principal is allowed to do. Essentially, it’s a “robot login” that Azure recognizes, keeping human accounts safe and making access to resources more secure and manageable.

### 12.Managed Identity
A **Managed Identity** in Azure is a special **identity/User accout automatically created and managed by Azure** for your application or service to access other Azure resources **securely**, without you having to handle passwords or secrets. This feels like a service Principle but this a special kind of service principle. This involves creation of a special service principle that will be used to access the resource.

This Provides :
- Automatic credential Rotation
- Better Lifecycle Management  : When u delete the app/service the identity or user account which is associated with it will be deleted as well.

- This identity can **authenticate with Azure AD** and obtain access tokens to interact with other Azure services that support Azure AD authentication.
- Essentially, the App/service  has its **own identity within the Azure AD tenant**, just like a user or service principal.
##### Types of Managed Identities
1. **System-assigned Managed Identity**
    - Enabled automatically for certain Azure resources (like VMs, App Services, or Functions). Scope is limited to specific resource
    - Tied to the **lifecycle of the resource**: when the resource is deleted, the identity is deleted.
2. **User-assigned Managed Identity**
    - Created independently of any resource. Scope is not limited to a specific resource.
    - Can be **assigned to multiple resources**, even across resource groups or subscriptions.
    - Provides flexibility to share the same identity between multiple resources.




#### 13.Resource 
An Azure resource is a single, specific item that you create in Azure. It is an actual instance you manage, such as one virtual machine, one storage account, or one web app. Each resource has its own name, settings, permissions, and cost. 


### 14.Azure Resource Manager
Azure Resource Manager (ARM) is Microsoft Azure's core management and deployment service, acting as a central interface for creating, updating, and deleting resources using declarative JSON templates (ARM Templates)or scripts, ensuring consistent deployments for your entire application stack. It groups resources into logical containers (Resource Groups) and handles dependencies, allowing for reliable Infrastructure as Code (IaC) and unified governance via Role-Based Access Control (RBAC)and tagging. 

![image](https://miro.medium.com/v2/resize:fit:828/format:webp/1*2UbP6WpxQfLNrYcgPx3Jyg.png)

### 15.RBAC
RBAC stands for role based access control is a authorization system built on Azure Resource Manager that provides fine-grained access management to Azure resources. Azure RBAC assigns roles (permissions) to users, groups, or apps at a specific scope so they can only do what they are allowed to do on Azure resources.

**Role Assignment** – Grants access to a resource. It consists of:
- **Security Principal** – The user, group, service principal, or managed identity requesting access.
- **Role Definition** – A set of permissions (e.g., read, write, delete).    
- **Scope** – The set of resources where the role applies (subscription, resource group, or specific resource)

| **Role**                                  | **Permissions**                                                                               | **Scope / What It Applies To**                                                                      |
| ----------------------------------------- | --------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------- |
| **Owner**                                 | Full access to all resources: create, read, update, delete, and **delegate access** to others | Can be assigned at **subscription, resource group, or resource level**; full control over resources |
| **Contributor**                           | Can create and manage all types of resources, but **cannot grant access** to others           | Subscription, resource group, or resource level                                                     |
| **Reader**                                | Can **view resources only**, cannot make any changes                                          | Subscription, resource group, or resource level                                                     |
| **User Access Administrator**             | Can **manage access** to resources: assign/remove roles for other users                       | Subscription, resource group, or resource level; does **not modify resource contents**              |
| **RBAC Administrator**                    | Can **manage both resources and access**, including assigning roles and managing resources    | Subscription, resource group, or resource level                                                     |
| **Billing Administrator / Classic Roles** | Can manage **billing, subscriptions, purchases, and support tickets**                         | Typically applies at **subscription or account level**, not resource level                          |

### 16.Resource ID
An **Azure Resource ID** is a **unique identifier** that Azure assigns to every resource you create. Think of it as the **full address of your resource** in Azure  it tells Azure **exactly where the resource lives**, including its subscription, resource group, type, and name. Every resource in Azure (like a VM, database, storage account, or web app) has a **Resource ID** so it can be referenced in scripts, templates, or APIs.
#### Format of an Azure Resource ID
It usually looks like this:
```
/subscriptions/{subscriptionId}/resourceGroups/{resourceGroupName}/providers/{resourceProviderNamespace}/{resourceType}/{resourceName}
```
**Example:**
```
/subscriptions/12345-abcde/resourceGroups/MyResourceGroup/providers/Microsoft.Compute/virtualMachines/MyVM
```
Breaking it down:
1. `/subscriptions/12345-abcde` → Which subscription it belongs to
2. `/resourceGroups/MyResourceGroup` → Which resource group it is in
3. `/providers/Microsoft.Compute/virtualMachines` → The service/type of resource
4. `/MyVM` → The name of the resource

### 17.Subscription
A subscription in Azure is a container where all your cloud resources like VMs, storage, networks, and apps reside, and you need an Azure account with the right permissions to access and use these resources. An Azure subscription is like a **main container** where **all your resources live**. It’s not a messy dump resources are **organized and categorized** using **resource groups**, so you can manage, control access, and track costs easily.

### 18.Resource Group
Resource Group is a logical container that holds related Azure resources (like VMs, storage, networks) for an application or service, allowing them to be managed, deployed, monitored, and deleted as a single unit.

### 19.Management Group
A Management Group in Azure is a container that sits above subscriptions and allows you to organize multiple subscriptions, apply policies, and manage access consistently across all subscriptions within the group. Large organizations often have many subscriptions for different teams, and instead of setting rules one by one, management groups let you group subscriptions and apply policies or rules to them all at once.


```
Management Group
┌─────────────────────────────────────────────┐
│  (Organizes multiple subscriptions, applies│
│   policies and access control)             │
└─────────────────────────────────────────────┘
           │
           ▼
┌───────────────────────────────┐     ┌───────────────────────────────┐
│        Subscription 1         │     │        Subscription 2         │
│ (Billing, Access, Resource Limits) │ │ (Billing, Access, Resource Limits) │
└───────────────────────────────┘     └───────────────────────────────┘
           │                                   │
           ▼                                   ▼
┌─────────────────────────────┐       ┌─────────────────────────────┐
│      Resource Group 1       │       │      Resource Group 3       │
│ (Organizes related resources)│      │ (Organizes project resources) │
├─────────────┬───────────────┤       ├─────────────┬───────────────┤
│ Virtual     │ Storage       │       │ Web App     │ SQL DB        │
│ Machine     │ Account       │       │ Storage     │ Function App │
├─────────────┼───────────────┤       └─────────────┴───────────────┘
│ SQL DB      │ Web App       │
└─────────────┴───────────────┘
           │
           ▼
┌─────────────────────────────┐
│      Resource Group 2       │
│ (Another set of resources)  │
├─────────────┬───────────────┤
│ Function App│ Storage       │
└─────────────┴───────────────┘

```

### 20.Microsoft Graph
**Microsoft Graph** is Microsoft’s unified REST API that allows applications, scripts, and services to securely access and manage identity, directory, and Microsoft 365 data such as users, groups, applications, devices, and roles using Azure Active Directory (Microsoft Entra ID) authentication and a centralized permission model.

### 21.Application 
An application is the software or system you build and run in Azure. It uses one or more Azure resources and services to work together, such as a website that uses a web app, a database, and storage.


### 22.Microsoft 365
**Microsoft 365** is a **cloud-based subscription service from Microsoft** that provides a suite of productivity tools and services for individuals, businesses, and organizations. It includes familiar applications like **Word, Excel, PowerPoint, and Outlook**, along with **cloud services** such as **OneDrive (cloud storage), Teams (communication and collaboration), SharePoint (document management), and Exchange Online (email hosting)**.

Unlike traditional software that you install once, Microsoft 365 is **subscription-based**, meaning you get regular updates, cloud storage, and access to the apps from any device with your account. It also integrates with **Entra ID (Azure Active Directory)** for identity and access management, so organizations can control who can access what securely.

### 23.Azure Automation Services
Azure Automation Services is a cloud service that allows you to automate repetitive tasks, processes, and workflows in Azure and other environments.  It helps manage resources, run scripts, and orchestrate tasks without manual intervention.

### 24.Logic App
**Azure Logic Apps** is a tool that helps you **automate tasks and connect different services together**,without needing to write much code. Logic Apps is like “IF THIS happens, THEN DO THAT” in the cloud.

### 25.Azure Functions
Azure Functions are a serverless, event-driven compute service that allows you to run small pieces of code on demand, without managing servers. These functions execute automatically in response to events such as HTTP requests, messages in a queue, or file uploads. 

A Function App is a container that hosts one or more Azure Functions, providing the runtime, configuration, and automatic scaling needed for them to run efficiently. This setup allows developers to focus on writing code while Azure handles infrastructure, scaling, and availability

Function Apps can also use **Managed Identities** to access other Azure resources securely. In a security context, attackers may try to **abuse Function Apps** because they can execute code in the tenant’s environment, potentially accessing resources or performing actions with the app’s identity.

### 26.Microsoft Intune
Microsoft Intune is a cloud-based service in Microsoft 365 that allows organizations to manage and secure devices and applications. It provides mobile device management (MDM) to control company-owned or personal devices, ensuring they comply with security policies such as encryption, PINs, and software updates.

It also provides mobile application management (MAM), enabling administrators to deploy, configure, and protect corporate apps, and control access to corporate data on those apps. Intune integrates closely with Azure Active Directory to enforce conditional access policies, allowing or blocking access to Microsoft 365 services based on device compliance and user identity. 

It also supports security and compliance features like app encryption, remote wipe, and blocking jailbroken devices. By centralizing device and app management, Intune ensures that corporate resources are accessed securely and that organizational policies are enforced across all endpoints.

### 27.Conditional Access Policies
Conditional Access policies are **rules in Azure Active Directory (Azure AD) that control access to cloud apps based on conditions** such as user, device, location, risk, or application. They enforce security requirements like multi-factor authentication (MFA), device compliance, or restricting access to certain networks before allowing sign-in or access to resources.

### 28.KeyVault
Azure Key Vault is a cloud service for securely storing and managing sensitive information such as cryptographic keys, secrets (passwords, API keys), and certificates. It allows applications and users to safely access these secrets without exposing them in code or configuration files, and provides access control, auditing, and encryption.

Objects in a Key Vault are accessed using a Key Vault identifier URL with the format
```
https://{vault-name}.vault.azure.net/{object-type}/{object-name}/{object-version}.
```
The vault name is globally unique, the object type can be keys, secrets, or certificates, the object name is unique within the vault, and the version is optional and system-generated to reference a specific version of the object.


### 29.Blob Storage
Azure Blob Storage is Microsoft's highly scalable, secure, and cost-effective cloud service for storing massive amounts of unstructured data, like images, videos, documents, and backups, accessible from anywhere via HTTP/HTTPS for web, mobile, and cloud-native apps, data lakes, and big data analytics.

#### Structure :

Storage Account

A storage account is the top-level resource in Azure Storage. It provides a globally unique namespace in Azure and acts as the container for all your storage resources. Every storage account can be accessed securely over HTTP or HTTPS. Think of it as the “root folder” that holds all your data.

Azure Storage Service Endpoints
A single storage account exposes multiple services, each with its own endpoint:
Blob storage:
```
https://<storage-account>.blob.core.windows.net
```
Azure Data Lake Storage Gen2:
```
https://<storage-account>.dfs.core.windows.net
```
Azure Files:
```
https://<storage-account>.file.core.windows.net
```
Queue storage:
```
https://<storage-account>.queue.core.windows.net
```
Table storage:
```
https://<storage-account>.table.core.windows.net
```

Each endpoint allows access to a different type of storage service within the account.

#### Container

A container is like a folder inside a storage account. It organizes blobs and allows you to manage access permissions. Containers can be set to public or private access. They are used to group related blobs together, such as images, documents, or logs.

#### Blob

A blob is the actual data object stored inside a container.

![image](https://www.baeldung.com/wp-content/uploads/sites/4/2023/03/blob_storage_architecture-2.png)

### 30.Azure Tools
- Azure CLI :The **Azure CLI (Command-Line Interface)** is a cross-platform tool used to **manage Azure resources from the command line** instead of the Azure portal.
- Microsoft Graph Module : The **Microsoft Graph Module** (usually for PowerShell) is a tool that allows you to **access Microsoft 365 data and services** like Outlook, Teams, SharePoint, and Azure AD.

### 31.OAuth
OAuth (Open Authorization) is an open standard protocol that allows a user or application to grant limited access to their resources on one service to another service, without sharing their password.
```
+--------------+          +---------------------+          +---------------------------+          +-----------------+
|              |          |                     |          |                           |          |                 |
|     User     |          |    Application      |          |   Microsoft Entra ID      |          |   Resource API  |
|   (Browser)  |          |      (Client)       |          |   (Authorization Server)  |          | (Protected API) |
|              |          |                     |          |                           |          |                 |
+--------------+          +---------------------+          +---------------------------+          +-----------------+
       |                         |                               |                                         |
       | 1. User clicks          |                               |                                         |
       | "Sign in with Microsoft"|                               |                                         |
       |------------------------>|                               |                                         |
       |                         |2.Redirect to Entra IDauthorize                                          |
       |                         |   endpoint                    |                                         |
       |                         |------------------------------>|                                         |
       |                         |                               |                                         |
       |                         |                               |  3. User authenticates                  |
       |                         |                               |     (username/pwd + MFA + CA)           |
       |                         |                               |  4. Consent prompt (if needed)          |
       |                         |                               |                                         |
       |                         |  5. Redirect back with auth code + state                                |
       |                         |<------------------------------|                                         |
       |                         |                               |                                         |
       |                         |  6. POST to token endpoint (code, code_verifier, client_id)             |
       |                         |-----------------------------------------------------------------------> |
       |                         |                               |                                         |
       |                         |                               | 7. Validate code & verifier             |
       |                         |                               | 8. Issue ID Token, Access Token, Refresh Token      |
       |                         |<----------------------------------------------------------------------- |
       |                         |                               |                                         |
       |                         |  9. Validate ID Token (signature, iss, aud, nonce)                      |
       |                         |                               |                                         |
       |                         | 10. Call API with Access Token (Bearer header)                          |
       |                         |-----------------------------------------------------------------------> |
       |                         |                               |                                         |
       |                         |                               | 11. Validate Access Token               |
       |                         |                               |     (iss, aud, scope, exp)              |
       |                         |                               |                                         |
       |                         |                               | 12. Return protected data               |
       |                         |<------------------------------------------------------------------------|
       |                         |                               |                                         |
       |                         | (Optional: Access Token expires ~1 hour)                                |
       |                         | 13. Use Refresh Token to get new tokens                                 |
       |                         |------------------------------------------------------------------------>|
       |                         |                               | 14. Validate Refresh Token              |
       |                         |<------------------------------------------------------------------------|
       |                         |                               |                                         |
```

#### OAuth Tokens
- **Access Token**  
    A short-lived token used by the client to access protected resources on the resource server. This Token cannot br revoked until Expiry
  ```
  Authorization: Bearer <access_token>
  ```
- **Refresh Token**  
    A long-lived token used by the client to obtain a new access token without re-authenticating the user. The Default Expiry time is 90 days but these can be revoked.
- **Authorization Code**  
    A temporary token issued by the authorization server that is exchanged for an access token.
- **ID Token**  
    A token (from OpenID Connect, not core OAuth) that contains identity information about the authenticated user.
- **Bearer Token**  
   A token that grants access to a resource to whoever presents it.
- **MAC Token**  
    A token type that requires cryptographic signing of requests (rarely used).
- **Refresh Token Rotation Token**  
    A new refresh token issued when the old one is exchanged, improving security against replay attacks.


### 32.App Registration

App Registration is the process of registering your application with Azure Active Directory (Azure AD). This registration provides your application with the necessary credentials to securely access Azure services and APIs, making your applications and services more secure and accessible. It’s like giving your application a key to securely access resources and user information on Azure. When  a app has been registered it will create an service principal for this app

When you create an Azure App Registration, you need to define a few things:

- _Application ID (Client ID):_ This is like a unique ID card for your app. It helps Azure recognize your app.
- _Redirect URIs:_ Think of these as specific entry points through which Azure allows users to return to your app after logging in.
- _Client Secrets:_ These are secret codes that only your app knows. They’re used to prove that your app is who it claims to be.
- _API Permissions:_ These are like permissions for your app to access specific services or data, like reading user profiles or accessing files.

Azure supports two main types of App Registrations:

- _Single-Tenant:_ If your app is for a specific group or company.
- _Multi-Tenant:_ If your app is for a broader audience and can work with different organizations.

### Workflow
##### **Step 1: App Registration**

1. You create an app registration in **Azure AD** (Entra ID).
2. Configure:
    - **App ID (client ID)**
    - **Redirect URIs** (where users return after login)
    - **Supported account types** (single-tenant or multi-tenant)
    - **API permissions** (Microsoft Graph or your app’s own API)
    - **Expose API** (define scopes for your app if it has its own API)
    - **Certificates / Secrets** (how the app proves identity)

> Think of this as giving the app a **passport and a VIP list of allowed actions**.
##### **Step 2: User Initiates Login**

1. User clicks **“Sign in with Microsoft”** in the app.
2. App redirects the user to **Azure AD login page**.
3. Azure AD checks **supported account types**:
    - Single-tenant → user must belong to this tenant
    - Multi-tenant → users from other tenants can log in
4. Azure AD handles authentication (password, MFA, etc.).
##### **Step 3: Consent**

- Azure AD checks **requested permissions/scopes**:
    - **Delegated permissions** → user consent
    - **Application permissions** → admin consent
- User/admin grants consent.
##### **Step 4: Token Issuance**
Azure AD issues **tokens for the app**:
1. **ID token** → identifies the user
2. **Access token** → lets the app call APIs
    - Scopes in the token = what API actions the app is allowed to perform

> Tokens are **specific to the app and API**, not the entire tenant.

##### **Step 5: App Uses Token**
1. App receives the access token.
2. App calls its API endpoint (or Microsoft Graph API if permission is granted):
3. `GET https://myapp.contoso.com/api/data Authorization: Bearer <access_token>`
4. API validates the token:
    - Issued for this app? 
    - Permissions / scopes allowed? 
5. API responds with **data specific to this app**.
##### **Step 6: Optional – Refresh Token**
- Access tokens expire (~1 hour)
- App can use **refresh token** to get a new access token without prompting the user to log in again.
##### **Step 7: Optional – App-Only Flow (No User)**
- If the app has **application permissions**:
    - Uses **client secret or certificate** to get a token
    - Can call APIs **without a user**
- Useful for background jobs or services.
##### **Step 8: Optional – Multi-Tenant Users**
- User from another tenant logs in
- Tenant B authenticates user
- Azure AD issues token scoped for the app in Tenant A
- App can now access data for this user **within allowed scopes**

> App **cannot access the entire tenant by default** — only what the token allows.
### Diagram
```
  +--------+           +----------------+           +-------------------+
  |        |           |                |           |                   |
  |  User  |  --->     |     App        |  --->     |   Azure AD /      |
  |        |           | (Registered)   |           |  Microsoft Graph  |
  +--------+           +----------------+           +-------------------+
       |                     |                             |
       | Click "Sign In"     |                             |
       |-------------------->|                             |
       |                     | Redirect to Azure AD login  |
       |                     |---------------------------->|
       |                     |                             |
       |                     |       Azure AD validates    |
       |                     |       user credentials + MFA|
       |                     |<----------------------------|
       |                     |                             |
       |                     |   Azure AD issues tokens:   |
       |                     |   - ID token                |
       |                     |   - Access token            |
       |                     |<----------------------------|
       | Receive token       |                             |
       |--------------------->|                            |
       |                     | Use access token to call API|
       |                     |---------------------------->|
       |                     |                             |
       |                     |       API validates token   |
       |                     |<----------------------------|
       |                     |                             |
       |                     | API returns requested data  |
       |                     |---------------------------->|
       |  Sees data          |                             |
       |<--------------------|                             |

```

### Impact
Applications in Azure are high‑value attack targets because they can authenticate without a user and often bypass user‑based security controls like MFA and Conditional Access. If an attacker obtains or adds a client secret or certificate to an app registration, they can authenticate as the application from anywhere and access APIs using the app’s permissions. Since app permissions can be very powerful (including tenant‑wide Microsoft Graph access) and any user can create app registrations by default, misconfigured or over‑privileged apps can lead to privilege escalation and widespread data exposure.
