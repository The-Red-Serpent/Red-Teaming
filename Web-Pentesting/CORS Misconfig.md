
### What is  Same-Origin Policy
<p align="justify">The Same Origin Policy is a security mechanism which is Implemented by browsers that prevents a website’s JavaScript from making requests to a different address (origin) than the site's address .JavaScript code running in your browser cannot send requests to another site  along with your cookies from your browser. If we try this, we will encounter an error such as 'cross origin request blocked. So a website cant request data from other website which is not same origin aka not  in same domain.</p>
- This does not Prevent writing between Web Application . It prevents reading between web applications
### Why Implement SOP?
- When a script running on one website (e.g., `evil.com`) makes a request to another website (e.g., `google.com`), the **browser will include the cookies of the target site (`google.com`)** in the request **if they exist** (i.e., if the user is logged in). and perform actions on their behalf

``Origin = Protocol + Hostname + Port``

### What is Cross Origin Resource Sharing
 <p align="justify">Modern web applications provide services by exchanging data via JavaScript (XHR) requests from multiple servers, domains, APIs or different web applications. However, as mentioned above, the Same Origin Policy defines a rule that prevents this.</p>
 <p align="justify">CORS is a feature that bypasses the SOP Restrictions and enables Sites to  request data from multiple Servers. It is a standard that allows servers to determine who can reach them via JavaScript requests through the browser.CORS uses some Headers to define these origins that it will let access to </p>
### CORS Headers:
- ``Access-Control-Allow-Origin``
	- Tell the Browser which origin is Allowed to access the resource
	- * = Any Sites can access
	- Null=means the server **trusts requests** from **files on disk**, sandboxed pages, or untrusted sources
	
- ``Access-Control-Allow-Methods ``
	- Lists the **HTTP methods** allowed for cross-origin requests.

- ``Access-Control-Allow-Headers``
	- Lists which **custom headers** the browser is allowed to send.

- ### `Access-Control-Allow-Credentials`
	- Tells the browser whether to **include cookies or credentials** in cross-origin requests.

- ``Access-Control-Expose-Headers``
	- Tells the browser which **response headers** can be read by JavaScript in a cross-origin request.


### Dynamic generation
**Dynamic CORS** is a server-side implementation of Cross-Origin Resource Sharing where the value of the `Access-Control-Allow-Origin` header is **generated at runtime**, based on the `Origin` value received in the request. This can lead to massive Vulns

In simpler terms:
The server reads the incoming request’s `Origin` and **responds by reflecting it** back in the `Access-Control-Allow-Origin` header.

### How to check for CORS Misconfigurations
### 1. Identify Sensitive Endpoints

Look for APIs like `/api/user`, `/api/profile`, `/me`, etc.
### 2. Send Request with Fake Origin
Example:

```bash
curl -i https://target.com/api/profile \
  -H "Origin: https://evil.com"
```

### 3. Check Response Headers
Look for:

- `Access-Control-Allow-Origin: https://evil.com`
- `Access-Control-Allow-Credentials: true`  
    If both exist → vulnerable
### 4. Try Multiple Origins

Test with:
- `null`
- `https://evil.com`
- `http://127.0.0.1`

If all are reflected → dynamic CORS
### 5. Look for Wildcard with Credentials
If you see:
```
Access-Control-Allow-Origin: *
Access-Control-Allow-Credentials: true
```

This is misconfigured
### 6. Attempt Exploitation (Optional)

Create a script on your domain to fetch protected data using `credentials: "include"`